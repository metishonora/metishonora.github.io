<!DOCTYPE html>
<html lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="google-site-verification" content="X_Sk9dHytUBVYyETRCACtsXUTaafN_O2tT9yQMpSca8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>캡슐화를 돕는 DTO 사용기 | README.md</title>
<meta name="generator" content="Jekyll v4.3.3">
<meta property="og:title" content="캡슐화를 돕는 DTO 사용기">
<meta name="author" content="Metishonora">
<meta property="og:locale" content="ko">
<meta name="description" content="코드의 의존성 낮추기 재사용이 가능한 코드를 만들기 위해선 코드 간 의존성을 낮춰야 한다. 의존성을 낮추기 위한 방법으로 MVC 패턴이 사용된다. MVC 패턴에서는 모델과 뷰가 서로의 존재를 모른다. 모델의 내부 구조가 바뀌든, 뷰의 표현 방식이 바뀌든 서로 영향을 주지 않아야 하기 때문이다. 하지만 데이터를 사용자에게 보여주기 위해선 결국 어떤 방식으로든 도메인이 가진 내용물을 뷰에게 전달해야 한다. 모델을 그대로 뷰에 넘겼을 때 class User { private final String name; private final String password; private final int age; public User() {...} public String getPassword() {...} public someOtherLogic() {...} ... } // controller.java void printUser() { User user = new User(); ... outputView.print(user); // 뷰에 User 객체를 그대로 전달한다. } 위 코드에서는 뷰에서 password필드에 getter를 통해 접근할 수 있다. 또한 뷰에서 사용하지 않을 다른 로직 메서드에도 접근할 수 있다. 캡슐화가 잘 이루어지지 않아, 모델과 뷰 간의 결합(coupling)이 생길 수 있다 [2]. 즉 모델이나 뷰의 요구사항이 변했을 때, 많은 코드를 변경해야 할 수 있을 것이다. DTO의 등장 이렇게 캡슐화가 깨지는 상황을 방지하기 위해 DTO(Data Transfer Object)를 활용할 수 있다 [1]. DTO는 원래 객체에서 원하는 데이터를 담아 전달할 수 있다 [3]. class UserNameDto { public final String name; private UserNameDto(String name) {...} public static UserNameDto from(User user) { return new UserNameDto(user.name); } } void printUser() { ... outputView.print(UserNameDto.from(user)); } 위 코드는 User 객체에서 name필드만을 DTO에 담아 뷰에 넘겨주는 모습이다. 이렇게 넘겨준다면 뷰에서는 더 이상 User 객체 자체에 접근할 수 없고, 캡슐화가 깨지지 않는 모습을 확인할 수 있다. 과제에 적용한 모습 이번 과제에 DTO를 적용할 때는: 뷰와 모델의 의존도 약화하기 모델의 캡슐화 코드 재사용성 이 세 가지 사항에 대해서 집중하였다. // Lotto.java public class Lotto { private final List&lt;Integer&gt; numbers; ... } // OutputView.java public class OutputView { public void printObject(Object arg) { System.out.println(arg); } } 고민했던 점은 private 선언된 numbers필드의 정보를 Dto로 건네주는 방법이다. Getter 메서드를 추가하여 Dto에 전달해줄 수 있지만(실제로 처음 Dto를 공부했던 글[1], [2]에서는 이 방법을 권장하는 것 같다), OutputView에 만들어둔 코드를 재사용하고 싶어 toString()을 오버라이딩하여 사용하였다. public class ResultDto { private final String stat; ... @Override public String toString() { return stat; } } public class LottoResult { @Override public String toString() { // 복잡한 String 변환 코드... } } 문제는 이렇게 완성하고 보니, 뷰의 책임은 굉장히 가벼워진 대신 출력을 구성하는 책임이 모델에게 넘어오게 되었다. DTO를 사용해 정보를 전달할 때, 도메인 객체의 toString()을 활용하여 String으로 파싱한 후 전달하였다. 즉 뷰에서 담당해야 하는 역할(출력을 어떻게 구성할지)을 도메인에서 담당하였다. 뷰 요구사항이 바뀔 경우, 도메인을 변경해야 하는 문제가 있을 것 같다. 뷰와 모델 간 어느 정도의 결합까지 허용해야 좋은 것인지, 그리고 클래스 책임 분배를 어떻게 해야 하는지는 언제나 어려운 문제인 것 같다. 프로젝트 전체 코드 References [1] DTO vs VO vs Entity [2] DTO의 사용 범위에 대하여 [3] DTO, Domain의 변환 위치에 대해서">
<meta property="og:description" content="코드의 의존성 낮추기 재사용이 가능한 코드를 만들기 위해선 코드 간 의존성을 낮춰야 한다. 의존성을 낮추기 위한 방법으로 MVC 패턴이 사용된다. MVC 패턴에서는 모델과 뷰가 서로의 존재를 모른다. 모델의 내부 구조가 바뀌든, 뷰의 표현 방식이 바뀌든 서로 영향을 주지 않아야 하기 때문이다. 하지만 데이터를 사용자에게 보여주기 위해선 결국 어떤 방식으로든 도메인이 가진 내용물을 뷰에게 전달해야 한다. 모델을 그대로 뷰에 넘겼을 때 class User { private final String name; private final String password; private final int age; public User() {...} public String getPassword() {...} public someOtherLogic() {...} ... } // controller.java void printUser() { User user = new User(); ... outputView.print(user); // 뷰에 User 객체를 그대로 전달한다. } 위 코드에서는 뷰에서 password필드에 getter를 통해 접근할 수 있다. 또한 뷰에서 사용하지 않을 다른 로직 메서드에도 접근할 수 있다. 캡슐화가 잘 이루어지지 않아, 모델과 뷰 간의 결합(coupling)이 생길 수 있다 [2]. 즉 모델이나 뷰의 요구사항이 변했을 때, 많은 코드를 변경해야 할 수 있을 것이다. DTO의 등장 이렇게 캡슐화가 깨지는 상황을 방지하기 위해 DTO(Data Transfer Object)를 활용할 수 있다 [1]. DTO는 원래 객체에서 원하는 데이터를 담아 전달할 수 있다 [3]. class UserNameDto { public final String name; private UserNameDto(String name) {...} public static UserNameDto from(User user) { return new UserNameDto(user.name); } } void printUser() { ... outputView.print(UserNameDto.from(user)); } 위 코드는 User 객체에서 name필드만을 DTO에 담아 뷰에 넘겨주는 모습이다. 이렇게 넘겨준다면 뷰에서는 더 이상 User 객체 자체에 접근할 수 없고, 캡슐화가 깨지지 않는 모습을 확인할 수 있다. 과제에 적용한 모습 이번 과제에 DTO를 적용할 때는: 뷰와 모델의 의존도 약화하기 모델의 캡슐화 코드 재사용성 이 세 가지 사항에 대해서 집중하였다. // Lotto.java public class Lotto { private final List&lt;Integer&gt; numbers; ... } // OutputView.java public class OutputView { public void printObject(Object arg) { System.out.println(arg); } } 고민했던 점은 private 선언된 numbers필드의 정보를 Dto로 건네주는 방법이다. Getter 메서드를 추가하여 Dto에 전달해줄 수 있지만(실제로 처음 Dto를 공부했던 글[1], [2]에서는 이 방법을 권장하는 것 같다), OutputView에 만들어둔 코드를 재사용하고 싶어 toString()을 오버라이딩하여 사용하였다. public class ResultDto { private final String stat; ... @Override public String toString() { return stat; } } public class LottoResult { @Override public String toString() { // 복잡한 String 변환 코드... } } 문제는 이렇게 완성하고 보니, 뷰의 책임은 굉장히 가벼워진 대신 출력을 구성하는 책임이 모델에게 넘어오게 되었다. DTO를 사용해 정보를 전달할 때, 도메인 객체의 toString()을 활용하여 String으로 파싱한 후 전달하였다. 즉 뷰에서 담당해야 하는 역할(출력을 어떻게 구성할지)을 도메인에서 담당하였다. 뷰 요구사항이 바뀔 경우, 도메인을 변경해야 하는 문제가 있을 것 같다. 뷰와 모델 간 어느 정도의 결합까지 허용해야 좋은 것인지, 그리고 클래스 책임 분배를 어떻게 해야 하는지는 언제나 어려운 문제인 것 같다. 프로젝트 전체 코드 References [1] DTO vs VO vs Entity [2] DTO의 사용 범위에 대하여 [3] DTO, Domain의 변환 위치에 대해서">
<link rel="canonical" href="https://metishonora.github.io/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/2-woowacourse-pre3-dto.html">
<meta property="og:url" content="https://metishonora.github.io/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/2-woowacourse-pre3-dto.html">
<meta property="og:site_name" content="README.md">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2023-11-07T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="캡슐화를 돕는 DTO 사용기">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Metishonora"},"dateModified":"2023-11-07T00:00:00+00:00","datePublished":"2023-11-07T00:00:00+00:00","description":"코드의 의존성 낮추기 재사용이 가능한 코드를 만들기 위해선 코드 간 의존성을 낮춰야 한다. 의존성을 낮추기 위한 방법으로 MVC 패턴이 사용된다. MVC 패턴에서는 모델과 뷰가 서로의 존재를 모른다. 모델의 내부 구조가 바뀌든, 뷰의 표현 방식이 바뀌든 서로 영향을 주지 않아야 하기 때문이다. 하지만 데이터를 사용자에게 보여주기 위해선 결국 어떤 방식으로든 도메인이 가진 내용물을 뷰에게 전달해야 한다. 모델을 그대로 뷰에 넘겼을 때 class User { private final String name; private final String password; private final int age; public User() {...} public String getPassword() {...} public someOtherLogic() {...} ... } // controller.java void printUser() { User user = new User(); ... outputView.print(user); // 뷰에 User 객체를 그대로 전달한다. } 위 코드에서는 뷰에서 password필드에 getter를 통해 접근할 수 있다. 또한 뷰에서 사용하지 않을 다른 로직 메서드에도 접근할 수 있다. 캡슐화가 잘 이루어지지 않아, 모델과 뷰 간의 결합(coupling)이 생길 수 있다 [2]. 즉 모델이나 뷰의 요구사항이 변했을 때, 많은 코드를 변경해야 할 수 있을 것이다. DTO의 등장 이렇게 캡슐화가 깨지는 상황을 방지하기 위해 DTO(Data Transfer Object)를 활용할 수 있다 [1]. DTO는 원래 객체에서 원하는 데이터를 담아 전달할 수 있다 [3]. class UserNameDto { public final String name; private UserNameDto(String name) {...} public static UserNameDto from(User user) { return new UserNameDto(user.name); } } void printUser() { ... outputView.print(UserNameDto.from(user)); } 위 코드는 User 객체에서 name필드만을 DTO에 담아 뷰에 넘겨주는 모습이다. 이렇게 넘겨준다면 뷰에서는 더 이상 User 객체 자체에 접근할 수 없고, 캡슐화가 깨지지 않는 모습을 확인할 수 있다. 과제에 적용한 모습 이번 과제에 DTO를 적용할 때는: 뷰와 모델의 의존도 약화하기 모델의 캡슐화 코드 재사용성 이 세 가지 사항에 대해서 집중하였다. // Lotto.java public class Lotto { private final List&lt;Integer&gt; numbers; ... } // OutputView.java public class OutputView { public void printObject(Object arg) { System.out.println(arg); } } 고민했던 점은 private 선언된 numbers필드의 정보를 Dto로 건네주는 방법이다. Getter 메서드를 추가하여 Dto에 전달해줄 수 있지만(실제로 처음 Dto를 공부했던 글[1], [2]에서는 이 방법을 권장하는 것 같다), OutputView에 만들어둔 코드를 재사용하고 싶어 toString()을 오버라이딩하여 사용하였다. public class ResultDto { private final String stat; ... @Override public String toString() { return stat; } } public class LottoResult { @Override public String toString() { // 복잡한 String 변환 코드... } } 문제는 이렇게 완성하고 보니, 뷰의 책임은 굉장히 가벼워진 대신 출력을 구성하는 책임이 모델에게 넘어오게 되었다. DTO를 사용해 정보를 전달할 때, 도메인 객체의 toString()을 활용하여 String으로 파싱한 후 전달하였다. 즉 뷰에서 담당해야 하는 역할(출력을 어떻게 구성할지)을 도메인에서 담당하였다. 뷰 요구사항이 바뀔 경우, 도메인을 변경해야 하는 문제가 있을 것 같다. 뷰와 모델 간 어느 정도의 결합까지 허용해야 좋은 것인지, 그리고 클래스 책임 분배를 어떻게 해야 하는지는 언제나 어려운 문제인 것 같다. 프로젝트 전체 코드 References [1] DTO vs VO vs Entity [2] DTO의 사용 범위에 대하여 [3] DTO, Domain의 변환 위치에 대해서","headline":"캡슐화를 돕는 DTO 사용기","mainEntityOfPage":{"@type":"WebPage","@id":"https://metishonora.github.io/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/2-woowacourse-pre3-dto.html"},"url":"https://metishonora.github.io/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/2-woowacourse-pre3-dto.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="/assets/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://metishonora.github.io/feed.xml" title="README.md">
<!-- Google tag (gtag.js) -->
<script>
  function initGoogleAnalytics() {
    var doNotTrack = (window.doNotTrack === "1" || navigator.doNotTrack === "1" ||
      navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1");
    var enableDNT = "true" == "true";

    if (!enableDNT || !doNotTrack) {
      var measurementId = 'G-3ZE0SQ8DC0';

      (function(src) {
        var tag = document.createElement('script');
        tag.src = src;
        tag.async = true;
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
      })('https://www.googletagmanager.com/gtag/js?id=' + measurementId);

      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', measurementId);
    }
  }
  window.addEventListener("load", initGoogleAnalytics);
</script>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.css" rel="stylesheet">
<style>
  .pswp .pswp__container .pswp__img {
    background-color: white;
  }
</style>

<script>
  function initPhotoSwipe() {
    var mainEl = document.querySelector("section.main");

    var imgEls = mainEl.querySelectorAll("img:not(.emoji)");
    imgEls.forEach((imgEl) => {
      imgEl.outerHTML = `
    <a class="photo-swipe"
      href="${imgEl.src}"
      data-width="${imgEl.getAttribute("width") || imgEl.width * 2}"
      data-height="${imgEl.getAttribute("height") || imgEl.height * 2}"
      data-caption="${imgEl.getAttribute("caption") || imgEl.alt}"
      target="_blank">
      ${imgEl.outerHTML}
    </a>`;
    });

    // Init empty gallery array
    var container = [];

    // Loop over gallery items and push it to the array
    var linkEls = mainEl.querySelectorAll("a.photo-swipe");
    linkEls.forEach((link) => {
      var item = {
        src: link.getAttribute("href"),
        w: link.dataset.width,
        h: link.dataset.height,
        title: link.dataset.caption || "",
      };
      container.push(item);
    });

    // Define click event on gallery item
    linkEls.forEach((link, index) => {
      link.addEventListener("click", (event) => {
        // Prevent location change
        event.preventDefault();

        // Define object and gallery options
        var pswp = document.querySelector(".pswp");

        var zoomLevel = 1;

        // Define object and gallery options
        var options = {
          index: index,
          bgOpacity: 0.85,
          showHideOpacity: true,
          closeOnScroll: true,
          maxSpreadZoom: 1,
          getDoubleTapZoom: (isMouseClick, item) => {
            if (item.detail) {
              zoomLevel += item.detail.origEvent.shiftKey ? -1 : 1;
              item.detail = undefined;
            } else {
              zoomLevel = zoomLevel === 1 ? 2 : 1;
            }
            if (zoomLevel <= 1) {
              zoomLevel = 1;
              setTimeout(() => pswp.classList.remove("pswp--zoomed-in"), 0);
            }
            return item.initialZoomLevel * zoomLevel;
          },
        };

        // Initialize PhotoSwipe
        var gallery = new PhotoSwipe(
          pswp,
          PhotoSwipeUI_Default,
          container,
          options
        );

        gallery.init();

        // Custom zoom event
        gallery.container.addEventListener("pswpTap", (e) => {
          gallery.currItem.detail = e.detail;
        });
      });
    });
  }

  window.addEventListener("load", initPhotoSwipe);
</script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
</head>
<body>
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe.
           It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides.
              PhotoSwipe keeps only 3 of them in the DOM to save memory.
              Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter"></div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--share" title="Share"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>





























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="README.md" src="/assets/favicon.ico" onerror="this.style.display='none'">
  README.md
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about.html">GITHUB</a><a class="page-link" href="/archives.html">ARCHIVES</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/tags.html">TAGS</a><a class="page-link" href="/index.html">MAIN</a>









<!--
              <span class="page-link">



<div id="google_translate_element" style="display: none;">
</div>

<span class="ct-language">
  <ul class="list-unstyled ct-language-dropdown">
    
      <li>
        <a href="#" class="lang-select" data-lang="en">
          
          <img src="https://cdn.countryflags.com/thumbs/united-states-of-america/flag-400.png" title="English">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="fr">
          
          <img src="https://cdn.countryflags.com/thumbs/france/flag-400.png" title="French">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="zh-CN">
          
          <img src="https://cdn.countryflags.com/thumbs/china/flag-400.png" title="Chinese(Simple)">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ja">
          
          <img src="https://cdn.countryflags.com/thumbs/japan/flag-400.png" title="Japanese">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ko">
          
          <img src="https://cdn.countryflags.com/thumbs/south-korea/flag-400.png" title="Korean">
          
        </a>
      </li>
    
      <li>
        <a href="#" class="lang-select" data-lang="ru">
          
          <img src="https://cdn.countryflags.com/thumbs/russia/flag-400.png" title="Russian">
          
        </a>
      </li>
    
  </ul>
</span>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'ko',
    autoDisplay: false,
    layout: google.translate.TranslateElement.InlineLayout.VERTICAL
  }, 'google_translate_element');

  // Links to cross-origin destinations are unsafe
  var gll = document.getElementsByClassName('goog-logo-link')[0];
  if (gll) {
    gll.setAttribute('rel', 'noopener');
  }

  function restoreLang() {
    var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
    if (!iframe) return;

    var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
    var restore_el = innerDoc.getElementsByTagName("button");

    for (var i = 0; i < restore_el.length; i++) {
      if (restore_el[i].id.indexOf("restore") >= 0) {
        restore_el[i].click();
        var close_el = innerDoc.getElementsByClassName("goog-close-link");
        close_el[0].click();
        return;
      }
    }
  }

  function triggerHtmlEvent(element, eventName) {
    var event;
    if (document.createEvent) {
      event = document.createEvent('HTMLEvents');
      event.initEvent(eventName, true, true);
      element.dispatchEvent(event);
    } else {
      event = document.createEventObject();
      event.eventType = eventName;
      element.fireEvent('on' + event.eventType, event);
    }
  }

  var googleCombo = document.querySelector("select.goog-te-combo");
  var langSelect = document.querySelector('.ct-language');
  langSelect.addEventListener('click', function(event) {
    if (!event.target) {
      return;
    }

    var selected = document.querySelector('.ct-language .ct-language-selected');
    if (selected) {
      selected.classList.remove('ct-language-selected');
    }

    var target = event.target;
    while (target && target !== langSelect ) {
      if (target.matches('.lang-select')) {
        break;
      }
      target = target.parentElement;
    }

    if (target && target.matches('.lang-select')) {
      var lang = target.getAttribute('data-lang');
      if (googleCombo.value == lang) {
        restoreLang();
      } else {
        target.parentElement.classList.add('ct-language-selected');
        googleCombo.value = lang;
        triggerHtmlEvent(googleCombo, 'change');
      }
    }

    event.preventDefault();
  });
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</span>
              -->
</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">캡슐화를 돕는 DTO 사용기</h1>
  <h2 class="post-subtitle">우테코 6기 프리코스 3주차</h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2023-11-07T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> 2023-11-07
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> about 4 mins to read</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#%EC%9A%B0%ED%85%8C%EC%BD%94%ED%94%84%EB%A6%AC%EC%BD%94%EC%8A%A4">#우테코프리코스</a><a class="post-tag" href="/tags.html#MVC">#MVC</a><a class="post-tag" href="/tags.html#DTO">#DTO</a><a class="post-tag" href="/tags.html#%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98">#클린아키텍처</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <h2 id="코드의-의존성-낮추기">코드의 의존성 낮추기</h2>
<p>재사용이 가능한 코드를 만들기 위해선 코드 간 <strong>의존성</strong>을 낮춰야 한다.
의존성을 낮추기 위한 방법으로 <a href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/1-woowacourse-pre3-mvc">MVC 패턴</a>이 사용된다.</p>

<p>MVC 패턴에서는 모델과 뷰가 서로의 존재를 모른다.
모델의 내부 구조가 바뀌든, 뷰의 표현 방식이 바뀌든 서로 영향을 주지 않아야 하기 때문이다.</p>

<p>하지만 데이터를 사용자에게 보여주기 위해선 결국 어떤 방식으로든
도메인이 가진 내용물을 뷰에게 전달해야 한다.</p>

<h2 id="모델을-그대로-뷰에-넘겼을-때">모델을 그대로 뷰에 넘겼을 때</h2>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">password</span><span class="o">;</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">User</span><span class="o">()</span> <span class="o">{...}</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPassword</span><span class="o">()</span> <span class="o">{...}</span>
	<span class="kd">public</span> <span class="nf">someOtherLogic</span><span class="o">()</span> <span class="o">{...}</span>
	<span class="o">...</span>
<span class="o">}</span>

<span class="c1">// controller.java</span>
<span class="kt">void</span> <span class="nf">printUser</span><span class="o">()</span> <span class="o">{</span>
	<span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
	<span class="o">...</span>
	<span class="n">outputView</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>  <span class="c1">// 뷰에 User 객체를 그대로 전달한다.</span>
<span class="o">}</span>
</code></pre></div></div>
<p>위 코드에서는 뷰에서 <em>password</em>필드에 getter를 통해 접근할 수 있다.
또한 뷰에서 사용하지 않을 다른 로직 메서드에도 접근할 수 있다.
캡슐화가 잘 이루어지지 않아, 모델과 뷰 간의 결합(coupling)이 생길 수 있다 [<a href="https://tecoble.techcourse.co.kr/post/2021-04-25-dto-layer-scope">2</a>].
즉 모델이나 뷰의 요구사항이 변했을 때, 많은 코드를 변경해야 할 수 있을 것이다.</p>

<h2 id="dto의-등장">DTO의 등장</h2>
<p>이렇게 캡슐화가 깨지는 상황을 방지하기 위해 <strong>DTO(Data Transfer Object)</strong>를 활용할 수 있다 [<a href="https://tecoble.techcourse.co.kr/post/2021-05-16-dto-vs-vo-vs-entity">1</a>].
DTO는 원래 객체에서 원하는 데이터를 담아 전달할 수 있다 [<a href="https://www.mainfn.dev/DTO,%20DOMAIN%20%EB%B3%80%ED%99%98%20%EC%9C%84%EC%B9%98%20%EB%B0%8F%20%EA%B0%81%20%EB%B0%A9%EB%B2%95%EC%9D%98%20%EC%9E%A5%EB%8B%A8%EC%A0%90%EC%97%90%20%EB%8C%80%ED%95%9C%20%EC%83%9D%EA%B0%81">3</a>].</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">UserNameDto</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nf">UserNameDto</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{...}</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">UserNameDto</span> <span class="nf">from</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">UserNameDto</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">printUser</span><span class="o">()</span> <span class="o">{</span>
	<span class="o">...</span>
	<span class="n">outputView</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="nc">UserNameDto</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">user</span><span class="o">));</span>
<span class="o">}</span>
</code></pre></div></div>
<p>위 코드는 User 객체에서 <em>name</em>필드만을 DTO에 담아 뷰에 넘겨주는 모습이다.
이렇게 넘겨준다면 뷰에서는 더 이상 User 객체 자체에 접근할 수 없고,
캡슐화가 깨지지 않는 모습을 확인할 수 있다.</p>

<h2 id="과제에-적용한-모습">과제에 적용한 모습</h2>
<p>이번 과제에 DTO를 적용할 때는:</p>
<ul>
  <li>뷰와 모델의 의존도 약화하기</li>
  <li>모델의 캡슐화</li>
  <li>코드 재사용성</li>
</ul>

<p>이 세 가지 사항에 대해서 집중하였다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Lotto.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Lotto</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="o">;</span>
	<span class="o">...</span>
<span class="o">}</span>

<span class="c1">// OutputView.java</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OutputView</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">printObject</span><span class="o">(</span><span class="nc">Object</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">arg</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>고민했던 점은 private 선언된 <em>numbers</em>필드의 정보를 Dto로 건네주는 방법이다.
Getter 메서드를 추가하여 Dto에 전달해줄 수 있지만(실제로 처음 Dto를 공부했던 글[<a href="https://tecoble.techcourse.co.kr/post/2021-05-16-dto-vs-vo-vs-entity">1</a>], [<a href="https://tecoble.techcourse.co.kr/post/2021-04-25-dto-layer-scope">2</a>]에서는 이 방법을 권장하는 것 같다),
OutputView에 만들어둔 코드를 재사용하고 싶어 toString()을 오버라이딩하여 사용하였다.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResultDto</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">stat</span><span class="o">;</span>
	<span class="o">...</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">stat</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LottoResult</span> <span class="o">{</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
		<span class="c1">// 복잡한 String 변환 코드...</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>문제는 이렇게 완성하고 보니, 뷰의 책임은 굉장히 가벼워진 대신 출력을 구성하는 책임이 모델에게 넘어오게 되었다.</p>

<p>DTO를 사용해 정보를 전달할 때,
도메인 객체의 toString()을 활용하여 String으로 파싱한 후 전달하였다.
즉 뷰에서 담당해야 하는 역할(출력을 어떻게 구성할지)을 도메인에서 담당하였다.
뷰 요구사항이 바뀔 경우, 도메인을 변경해야 하는 문제가 있을 것 같다.</p>

<p>뷰와 모델 간 어느 정도의 결합까지 허용해야 좋은 것인지,
그리고 클래스 책임 분배를 어떻게 해야 하는지는 언제나 어려운 문제인 것 같다.</p>

<p><a href="https://github.com/metishonora/java-lotto-6">프로젝트 전체 코드</a></p>

<h2 id="references">References</h2>
<p>[1] <a href="https://tecoble.techcourse.co.kr/post/2021-05-16-dto-vs-vo-vs-entity">DTO vs VO vs Entity</a></p>

<p>[2] <a href="https://tecoble.techcourse.co.kr/post/2021-04-25-dto-layer-scope">DTO의 사용 범위에 대하여</a></p>

<p>[3] <a href="https://www.mainfn.dev/DTO,%20DOMAIN%20%EB%B3%80%ED%99%98%20%EC%9C%84%EC%B9%98%20%EB%B0%8F%20%EA%B0%81%20%EB%B0%A9%EB%B2%95%EC%9D%98%20%EC%9E%A5%EB%8B%A8%EC%A0%90%EC%97%90%20%EB%8C%80%ED%95%9C%20%EC%83%9D%EA%B0%81">DTO, Domain의 변환 위치에 대해서</a></p>



    </div>

</article>
<div class="post-nav">
<a class="previous" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/1-woowacourse-pre3-mvc.html" title="MVC 패턴으로 작성하기">MVC 패턴으로 작성하기</a><a class="next" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/08/1-woowacourse-pre3-composition.html" title="상속과 조합 클래스">상속과 조합 클래스</a>
</div>
    <div class="post-related">
      <div>Related Articles</div>
      <ul>
        
          <li><a class="related" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/08/1-woowacourse-pre3-composition.html" title="상속과 조합 클래스">상속과 조합 클래스</a></li>
        
          <li><a class="related" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/07/1-woowacourse-pre3-mvc.html" title="MVC 패턴으로 작성하기">MVC 패턴으로 작성하기</a></li>
        
          <li><a class="related" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/12/01/woowacourse-finalize.html" title="클린 코드 작성하기 - 우테코를 마치며">클린 코드 작성하기 - 우테코를 마치며</a></li>
        
          <li><a class="related" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/26/woowacourse-pre4-unit-test.html" title="좋은 단위 테스트 작성하기">좋은 단위 테스트 작성하기</a></li>
        
          <li><a class="related" href="/%EC%9A%B0%ED%85%8C%EC%BD%94/2023/11/08/2-woowacourse-pre3-factory.html" title="생성자를 숨기는 팩토리 메서드">생성자를 숨기는 팩토리 메서드</a></li>
        
      </ul>
    </div>
    <div class="post-comments">
<div id="utterances-placeholder"></div>
<script>
  const utterancesThemeFromDataTheme = () => {
    const dataTheme = document.documentElement.getAttribute('data-theme');
    return `github-${dataTheme}`;
  };

  const setUtterancesTheme = () => {
    const iframe = document.querySelector('.utterances-frame');
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: utterancesThemeFromDataTheme()
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es');
    }
  }

  // dynamic change
  const observer = new MutationObserver((mutationsList, observer) => {
    for (let mutation of mutationsList) {
      if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
        setUtterancesTheme();
      }
    }
  });
  observer.observe(document.documentElement, { attributes: true, childList: false, subtree: false });

  let utterancesScript = document.createElement('script');
  utterancesScript.async = true;
  utterancesScript.src = 'https://utteranc.es/client.js';
  utterancesScript.crossOrigin = 'anonymous';
  utterancesScript.setAttribute('issue-term', 'title');
  utterancesScript.setAttribute('label', '💬');
  utterancesScript.setAttribute('repo', 'metishonora/metishonora');
  utterancesScript.setAttribute('theme', utterancesThemeFromDataTheme());

  const placeholder = document.getElementById('utterances-placeholder');
  placeholder.parentNode.replaceChild(utterancesScript, placeholder);
</script>
</div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">목차</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>
<span class="copyleft">©</span> 2024 S G Kim</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>

</body>
</html>
